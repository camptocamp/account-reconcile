<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="report_purchaseorder_document" inherit_id="purchase.report_purchaseorder_document">
    <xpath expr="//div[@t-if='o.date_order']" position="before">
      <div t-if="o.date_order" class="col-xs-3">
        <strong>Validated By:</strong>
        <p t-field="o.validator"/>
      </div>
    </xpath>

    <xpath expr="//div[@t-if='not o.dest_address_id and o.picking_type_id and o.picking_type_id.warehouse_id']" position="replace">
      <div t-if="not o.dest_address_id and o.picking_type_id and o.picking_type_id.warehouse_id">
        <div t-field="o.picking_type_id.warehouse_id.partner_id"
             t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true, "phone_icons": true}'/>
        <span>Horaire: 8h-12h00 / 13h30-17h30</span>
      </div>
    </xpath>

    <xpath expr="//div[@class='page']/table[1]" position="replace">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th><strong>Brand</strong></th>
            <th><strong>Name</strong></th>
            <th><strong>Description</strong></th>
            <th><strong>Date Req.</strong></th>
            <th class="text-center"><strong>Qty</strong></th>
            <th class="text-right"><strong>EAN13</strong></th>
            <th class="text-right"><strong>Unit Price</strong></th>
            <th class="text-right"><strong>Taxes</strong></th>
            <th class="text-right"><strong>Net Price</strong></th>
          </tr>
        </thead>
        <tbody>
          <tr t-foreach="o.order_line" t-as="line">
            <td>
              <span t-field="line.product_id.brand"/>
            </td>
            <td>
              <span t-field="line.product_id.name"/>
            </td>
            <td>
              <span t-field="line.product_id.default_code"/>
            </td>
            <td>
              <span t-field="line.date_planned"/>
            </td>
            <td class="text-center">
              <span t-field="line.product_qty"/>
            </td>
            <td class="text-right">
              <span t-field="line.product_id.barcode"/>
            </td>
            <td class="text-right">
              <span t-field="line.price_unit"
                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
            </td>
            <td class="text-right">
              <span t-esc="', '.join([tax.name or '' for tax in line.taxes_id])"/>
            </td>
            <td class="text-right">
              <span t-field="line.price_subtotal"
                    t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
            </td>
          </tr>
        </tbody>
      </table>
    </xpath>

    <xpath expr="//p[@t-field='o.notes']" position="after">
      <t t-if="o.picking_type_id.warehouse_id">
        <p style="page-break-before:always"/>
        <div>
          <br/>
          <p><b>Information pour la livraison</b></p>

          <t t-if="o.picking_type_id.warehouse_id.name == 'QoQa Services SA'">
            <p>QoQa Services SA - Entrepôt</p>
            <p>Rue de l'Industrie 66</p>
            <p>1030 Bussigny</p>
            <p>Horaire 8h-12h00 / 13h30-17h30</p>
            <p>Merci de contacter</p>
            <p>Serkan Kilinc: serkan.kilinc@qoqa.com</p>
            <p>ou Nathan Aubert:  nathan.aubert@qoqa.com </p>
            <p>Info logistique team: logistique@qoqa.ch / +41 (0) 21 633 20 83</p>
          </t>
          <t t-if="o.picking_type_id.warehouse_id.name == 'Poste Daillens'">
            <p>Merci de contacter Sylvain Ecoffey, Responsable d’exploitation pour les livraisons et informations supplémentaires.</p>
            <br/>
            <p>Poste CH SA</p>
            <p>PostLogistics</p>
            <p>Centre logistique</p>
            <p>Z.I. Les Graveys</p>
            <p>CH-1306 Daillens</p>
            <br/>
            <p>E-Mail : sylvain.ecoffey@poste.ch</p>
            <p>Info logistique team: cld.sav.stockage@post.ch</p>
          </t>
          <t t-if="o.picking_type_id.warehouse_id.name == 'Poste Dintikon'">
            <p>Merci de contacter Sylvain Ecoffey, Responsable d’exploitation pour les livraisons et informations supplémentaires.</p>
            <p>Pour la livraison des gros articles de plus de 30 kg (sèche-linge, imprimantes, TV, appareils de fitness,...).</p>
            <br/>
            <p>PostLogistics SA</p>
            <p>Service de montage</p>
            <p>Lagerstrasse 12</p>
            <p>5606 Dintikon</p>
            <br/>
            <p>E-Mail : sylvain.ecoffey@poste.ch</p>
            <p>Info logistique team: cld.sav.stockage@post.ch</p>
          </t>
        </div>
      </t>
    </xpath>
</template>

</odoo>
