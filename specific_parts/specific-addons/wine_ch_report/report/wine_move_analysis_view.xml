<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="view_wine_move_analysis_tree" model="ir.ui.view">
      <field name="name">report.wine.move.analysis.tree</field>
      <field name="model">report.wine.move.analysis</field>
      <field name="arch" type="xml">
        <tree string="Wine Moves Analysis" create="false">
          <field name="date" invisible="1"/>
          <field name="year" invisible="1" />
          <field name="month" invisible="1"/>
          <field name="day" invisible="1"/>
          <field name="type" invisible="1"/>
          <field name="company_id" invisible="1"/>
          <field name="partner_id" invisible="1" context="{'contact_display':'partner'}" />
          <field name="picking_id" invisible="1"/>
          <field name="location_id" invisible="1"/>
          <field name="location_dest_id" invisible="1"/>
          <field name="product_id" invisible="1"/>
          <field name="categ_id" invisible="1"/>
          <field name="stock_journal" invisible="1"/>
          <field name="state" invisible="1"/>
          <field name="attribute_set_id" invisible="1"/>
          <field name="wine_bottle_id" invisible="1"/>
          <field name="product_qty" sum="Total quantity"/>
          <field name="product_qty_in" sum="Total incoming quantity" />
          <field name="product_qty_out" sum="Total outgoing quantity"/>
          <field name="product_volume" sum="Total volume"/>
          <field name="product_volume_in" sum="Total incoming volume" />
          <field name="product_volume_out" sum="Total outgoing volume" />
        </tree>
      </field>
    </record>

    <record id="view_wine_move_analysis_graph" model="ir.ui.view">
      <field name="name">report.wine.move.analysis.tree</field>
      <field name="model">report.wine.move.analysis</field>
      <field name="arch" type="xml">
        <graph string="Wine Moves Analysis" type="bar">
          <field name="product_id"/>
          <field name="product_volume" operator="+"/>
        </graph>
      </field>
    </record>

    <record id="view_wine_move_analysis_search" model="ir.ui.view">
      <field name="name">report.wine.move.analysis.search</field>
      <field name="model">report.wine.move.analysis</field>
      <field name="arch" type="xml">
        <search string="Wine Moves Analysis">
          <filter string="Done" name="done" icon="terp-dialog-close" domain="[('state','=','done')]" help = "Completed Stock-Moves"/>
          <filter string="Todo" icon="terp-gtk-go-back-rtl" domain="[('state','in',('assigned','waiting','confirmed'))]" help = "Future Stock-Moves"/>
          <separator/>
          <filter icon="terp-go-home" name="in" string="Incoming" domain="[('type','=','in')]"/>
          <filter icon="terp-go-home" name="internal" string="Internal" domain="[('type','=','internal')]"/>
          <filter icon="terp-go-home" name="out" string="Outgoing" domain="[('type','=','out')]"/>
          <field name="attribute_set_id" default_focus="1"/>
          <field name="product_id"/>
          <field name="wine_bottle_id"/>
          <field name="partner_id" context="{'contact_display':'partner'}"/>
          <group expand="0" string="Extended Filters...">
            <field name="location_id" />
            <field name="location_dest_id" />
            <field name="categ_id"/>
            <field name="stock_journal"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <field name="date"/>
          </group>
          <group expand="1" string="Group By...">
            <filter name="group_partner" string="Partner" icon="terp-partner" context="{'group_by':'partner_id'}"/>
            <filter name="group_categ_id" string="Product Category" icon="terp-stock_symbol-selection" context="{'group_by':'categ_id'}"/>
            <filter name="group_product" string="Product" icon="terp-accessories-archiver" context="{'group_by':'product_id'}"/>
            <filter name="group_picking" string="Shipment" icon="terp-accessories-archiver" context="{'group_by':'picking_id'}"/>
            <filter name="src_location" string="Source Location" icon="terp-gtk-jump-to-rtl" context="{'group_by':'location_id'}"/>
            <filter name="dest_location" string="Dest. Location" icon="terp-gtk-jump-to-ltr"  context="{'group_by':'location_dest_id'}"/>
            <filter name="group_type" string="Type" icon="terp-stock_symbol-selection" context="{'group_by':'type'}" help="Shipping type specify, goods coming in or going out"/>
            <filter name="group_state" string="Status" icon="terp-stock_effects-object-colorize" context="{'group_by':'state'}"/>
            <filter name="group_stock_journal" string="Stock journal" icon="terp-folder-orange" context="{'group_by':'stock_journal'}"/>
            <filter name="group_state" string="Company" icon="terp-go-home" context="{'group_by':'company_id'}" groups="base.group_multi_company"/>
            <filter name="group_day" string="Day" icon="terp-go-today" context="{'group_by':'day'}" help="Day Planned"/>
            <filter name="group_month" string="Month" icon="terp-go-month" context="{'group_by':'date'}" help="Month Planned"/>
            <filter name="group_year" string="Year" icon="terp-go-year" context="{'group_by':'year'}"  help="Year Planned"/>
          </group>
        </search>
      </field>
    </record>

    <record id="action_wine_move_analysis" model="ir.actions.act_window">
      <field name="name">Wine Moves Analysis</field>
      <field name="res_model">report.wine.move.analysis</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,graph</field>
      <field name="search_view_id"  ref="view_wine_move_analysis_search"/>
      <field name="context">{'contact_display': 'partner', 'search_default_done': 1, 'group_by': ['year', 'product_id'], 'group_by_no_leaf': 1,}</field>
      <field name="help">Allow to analysis the volume of wine sent to customers.</field>
    </record>

  </data>
</openerp>
