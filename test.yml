# For a test server. Containers are always restarted
# This file should be called with
# docker-compose -f test.yml up
odoo:
  image: camptocamp/alcyon_odoo:latest
  restart: always
  command: ""
  expose:
    - 8069
    - 8072
  links:
    - db:db
  volumes_from:
    - dataodoo
  environment:
    - SCENARIO_MAIN_TAG=alcyon
    - DB_USER=odoo
    - DB_PASSWORD=odoo
    - DB_NAME=odoodb
    - ADMIN_PASSWD=mijaebohb8Thae1g

db:
  image: postgres:9.5
  restart: always
  environment:
    - POSTGRES_USER=odoo
    - POSTGRES_PASSWORD=odoo
  volumes_from:
    - datadb
  expose:
    - 5432

nginx:
  image: camptocamp/odoo-nginx:9.0
  restart: always
  ports:
    - 80:80
    # TODO: 443
  links:
    - odoo:odoo

dataodoo:
  image: debian:jessie
  volumes:
    - /data/odoo
  command: "true"

datadb:
  image: debian:jessie
  volumes:
    - /var/lib/postgresql
  command: "true"
